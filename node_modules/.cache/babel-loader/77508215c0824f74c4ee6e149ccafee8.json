{"ast":null,"code":"var _jsxFileName = \"/Users/xavrac/dev/react/pendu/src/HangmanCanvas.js\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nconst RED_COLOR = 'rgb(200, 0, 0)';\nconst HANGMAN_STEPS = [ctx => {\n  ctx.moveTo(5, 240);\n  ctx.lineTo(70, 240);\n}, ctx => {\n  ctx.moveTo(25, 240);\n  ctx.lineTo(25, 20);\n}, ctx => {\n  ctx.moveTo(24, 20);\n  ctx.lineTo(105, 20);\n}, ctx => {\n  ctx.moveTo(25, 40);\n  ctx.lineTo(45, 20);\n}, ctx => {\n  ctx.moveTo(105, 19);\n  ctx.lineTo(105, 45);\n}, ctx => {\n  // Head\n  ctx.moveTo(117, 57);\n  ctx.arc(105, 57, 12, 0, 3 * Math.PI * 2, false);\n}, ctx => {\n  // Body\n  ctx.moveTo(105, 69);\n  ctx.lineTo(105, 130);\n}, ctx => {\n  // Left leg\n  ctx.moveTo(105, 130);\n  ctx.lineTo(80, 180);\n}, ctx => {\n  // Right leg\n  ctx.moveTo(105, 130);\n  ctx.lineTo(125, 180);\n}, ctx => {\n  // Left arm\n  ctx.moveTo(105, 85);\n  ctx.lineTo(85, 115);\n}, ctx => {\n  // Right arm\n  ctx.moveTo(105, 85);\n  ctx.lineTo(125, 115);\n}];\n\nclass HangmanCanvas extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n  }\n\n  componentDidMount() {\n    this.resetCanvas();\n  }\n\n  shouldComponentUpdate({\n    numberOfErrors\n  }) {\n    if (numberOfErrors === 0) {\n      this.resetCanvas();\n    }\n\n    return this.props.numberOfErrors !== numberOfErrors;\n  }\n\n  resetCanvas() {\n    const canvas = this.canvas.current;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, 150, 250);\n    ctx.strokeRect(0, 0, 150, 250);\n    this.drawHangmanSteps(0, this.props.maxErrorsAuthorized - 1, ctx);\n  }\n\n  drawHangmanSteps(startStepIndex, endStepIndex, ctx) {\n    console.log(`drawHangmanSteps ${startStepIndex} ${endStepIndex}`);\n    console.log(`How many steps : ${HANGMAN_STEPS.length}`);\n    ctx.beginPath();\n    HANGMAN_STEPS.slice(startStepIndex, endStepIndex).forEach(step => step(ctx));\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  componentDidUpdate({\n    maxErrorsAuthorized\n  }) {\n    const canvas = this.canvas.current;\n    const ctx = canvas.getContext(\"2d\");\n    const newNumberOfErrors = this.props.numberOfErrors;\n    const startStepIndex = HANGMAN_STEPS.length - maxErrorsAuthorized;\n    console.log(\"startStepIndex \" + startStepIndex);\n    const endStepIndex = startStepIndex + newNumberOfErrors;\n    console.log(\"endStepIndex \" + endStepIndex);\n\n    if (endStepIndex === HANGMAN_STEPS.length) {\n      ctx.fillStyle = RED_COLOR;\n      ctx.fillRect(1, 1, 149, 249);\n      ctx.beginPath();\n      ctx.moveTo(102, 50);\n      ctx.lineTo(98, 58);\n      ctx.moveTo(98, 50);\n      ctx.lineTo(102, 58);\n      ctx.moveTo(107, 50);\n      ctx.lineTo(112, 58);\n      ctx.moveTo(112, 50);\n      ctx.lineTo(107, 58);\n      ctx.closePath();\n      ctx.stroke(); //100, 50\n    }\n\n    this.drawHangmanSteps(0, endStepIndex, ctx);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      ref: this.canvas,\n      height: 250,\n      width: 150,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nHangmanCanvas.propTypes = {\n  numberOfErrors: PropTypes.number.isRequired,\n  maxErrorsAuthorized: PropTypes.number.isRequired\n};\nHangmanCanvas.defaultProps = {\n  numberOfErrors: 0\n};\nexport default HangmanCanvas;","map":{"version":3,"sources":["/Users/xavrac/dev/react/pendu/src/HangmanCanvas.js"],"names":["PropTypes","React","Component","RED_COLOR","HANGMAN_STEPS","ctx","moveTo","lineTo","arc","Math","PI","HangmanCanvas","constructor","props","canvas","createRef","componentDidMount","resetCanvas","shouldComponentUpdate","numberOfErrors","current","getContext","clearRect","strokeRect","drawHangmanSteps","maxErrorsAuthorized","startStepIndex","endStepIndex","console","log","length","beginPath","slice","forEach","step","closePath","stroke","componentDidUpdate","newNumberOfErrors","fillStyle","fillRect","render","propTypes","number","isRequired","defaultProps"],"mappings":";AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,MAAMC,SAAS,GAAG,gBAAlB;AACA,MAAMC,aAAa,GAAG,CACjBC,GAAD,IAAS;AACLA,EAAAA,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAc,GAAd;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,EAAX,EAAe,GAAf;AACH,CAJiB,EAKjBF,GAAD,IAAS;AACLA,EAAAA,GAAG,CAACC,MAAJ,CAAW,EAAX,EAAe,GAAf;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,EAAX,EAAe,EAAf;AACH,CARiB,EASjBF,GAAD,IAAS;AACLA,EAAAA,GAAG,CAACC,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACH,CAZiB,EAajBF,GAAD,IAAS;AACLA,EAAAA,GAAG,CAACC,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,EAAX,EAAe,EAAf;AACH,CAhBiB,EAiBjBF,GAAD,IAAS;AACLA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACH,CApBiB,EAqBjBF,GAAD,IAAS;AACL;AACAA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,EAAAA,GAAG,CAACG,GAAJ,CAAQ,GAAR,EAAa,EAAb,EAAiB,EAAjB,EAAqB,CAArB,EAAwB,IAAIC,IAAI,CAACC,EAAT,GAAc,CAAtC,EAAyC,KAAzC;AACH,CAzBiB,EA0BjBL,GAAD,IAAS;AACL;AACAA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,GAAhB;AACH,CA9BiB,EA+BjBF,GAAD,IAAS;AACL;AACAA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,GAAhB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,EAAX,EAAe,GAAf;AACH,CAnCiB,EAoCjBF,GAAD,IAAS;AACL;AACAA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,GAAhB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,GAAhB;AACH,CAxCiB,EAyCjBF,GAAD,IAAS;AACL;AACAA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,EAAX,EAAe,GAAf;AACH,CA7CiB,EA8CjBF,GAAD,IAAS;AACL;AACAA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,GAAhB;AACH,CAlDiB,CAAtB;;AAqDA,MAAMI,aAAN,SAA4BT,SAA5B,CAAsC;AAElCU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,MAAL,GAAcb,KAAK,CAACc,SAAN,EAAd;AACH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,SAAKC,WAAL;AACH;;AAEDC,EAAAA,qBAAqB,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAqB;AACtC,QAAIA,cAAc,KAAK,CAAvB,EAA0B;AACtB,WAAKF,WAAL;AACH;;AACD,WAAO,KAAKJ,KAAL,CAAWM,cAAX,KAA8BA,cAArC;AACH;;AAEDF,EAAAA,WAAW,GAAG;AACV,UAAMH,MAAM,GAAG,KAAKA,MAAL,CAAYM,OAA3B;AACA,UAAMf,GAAG,GAAGS,MAAM,CAACO,UAAP,CAAkB,IAAlB,CAAZ;AAEAhB,IAAAA,GAAG,CAACiB,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,GAApB,EAAyB,GAAzB;AACAjB,IAAAA,GAAG,CAACkB,UAAJ,CAAe,CAAf,EAAkB,CAAlB,EAAqB,GAArB,EAA0B,GAA1B;AACA,SAAKC,gBAAL,CAAsB,CAAtB,EAAyB,KAAKX,KAAL,CAAWY,mBAAX,GAAiC,CAA1D,EAA6DpB,GAA7D;AACH;;AAEDmB,EAAAA,gBAAgB,CAACE,cAAD,EAAiBC,YAAjB,EAA+BtB,GAA/B,EAAoC;AAChDuB,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBH,cAAe,IAAGC,YAAa,EAA/D;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAa,oBAAmBzB,aAAa,CAAC0B,MAAO,EAArD;AACAzB,IAAAA,GAAG,CAAC0B,SAAJ;AACA3B,IAAAA,aAAa,CAAC4B,KAAd,CAAoBN,cAApB,EAAoCC,YAApC,EAAkDM,OAAlD,CAA0DC,IAAI,IAAIA,IAAI,CAAC7B,GAAD,CAAtE;AACAA,IAAAA,GAAG,CAAC8B,SAAJ;AACA9B,IAAAA,GAAG,CAAC+B,MAAJ;AACH;;AAEDC,EAAAA,kBAAkB,CAAC;AAAEZ,IAAAA;AAAF,GAAD,EAA0B;AACxC,UAAMX,MAAM,GAAG,KAAKA,MAAL,CAAYM,OAA3B;AACA,UAAMf,GAAG,GAAGS,MAAM,CAACO,UAAP,CAAkB,IAAlB,CAAZ;AACA,UAAMiB,iBAAiB,GAAG,KAAKzB,KAAL,CAAWM,cAArC;AACA,UAAMO,cAAc,GAAGtB,aAAa,CAAC0B,MAAd,GAAuBL,mBAA9C;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoBH,cAAhC;AACA,UAAMC,YAAY,GAAGD,cAAc,GAAGY,iBAAtC;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkBF,YAA9B;;AAEA,QAAIA,YAAY,KAAKvB,aAAa,CAAC0B,MAAnC,EAA2C;AACvCzB,MAAAA,GAAG,CAACkC,SAAJ,GAAgBpC,SAAhB;AACAE,MAAAA,GAAG,CAACmC,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,GAAnB,EAAwB,GAAxB;AACAnC,MAAAA,GAAG,CAAC0B,SAAJ;AACA1B,MAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,MAAAA,GAAG,CAACE,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,EAAX,EAAe,EAAf;AACAD,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AAEAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAF,MAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAD,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB,EAAhB;AACAF,MAAAA,GAAG,CAAC8B,SAAJ;AACA9B,MAAAA,GAAG,CAAC+B,MAAJ,GAduC,CAevC;AACH;;AAED,SAAKZ,gBAAL,CAAsB,CAAtB,EAAyBG,YAAzB,EAAuCtB,GAAvC;AACH;;AAEDoC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,GAAG,EAAE,KAAK3B,MAAlB;AAA0B,MAAA,MAAM,EAAE,GAAlC;AAAuC,MAAA,KAAK,EAAE,GAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAKH;;AAxEiC;;AA2EtCH,aAAa,CAAC+B,SAAd,GAA0B;AACtBvB,EAAAA,cAAc,EAAEnB,SAAS,CAAC2C,MAAV,CAAiBC,UADX;AAEtBnB,EAAAA,mBAAmB,EAAEzB,SAAS,CAAC2C,MAAV,CAAiBC;AAFhB,CAA1B;AAKAjC,aAAa,CAACkC,YAAd,GAA6B;AACzB1B,EAAAA,cAAc,EAAE;AADS,CAA7B;AAIA,eAAeR,aAAf","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\n\nconst RED_COLOR = 'rgb(200, 0, 0)'\nconst HANGMAN_STEPS = [\n    (ctx) => {\n        ctx.moveTo(5, 240)\n        ctx.lineTo(70, 240)\n    },\n    (ctx) => {\n        ctx.moveTo(25, 240)\n        ctx.lineTo(25, 20)\n    },\n    (ctx) => {\n        ctx.moveTo(24, 20)\n        ctx.lineTo(105, 20)\n    },\n    (ctx) => {\n        ctx.moveTo(25, 40)\n        ctx.lineTo(45, 20)\n    },\n    (ctx) => {\n        ctx.moveTo(105, 19)\n        ctx.lineTo(105, 45)\n    },\n    (ctx) => {\n        // Head\n        ctx.moveTo(117, 57)\n        ctx.arc(105, 57, 12, 0, 3 * Math.PI * 2, false)\n    },\n    (ctx) => {\n        // Body\n        ctx.moveTo(105, 69)\n        ctx.lineTo(105, 130)\n    },\n    (ctx) => {\n        // Left leg\n        ctx.moveTo(105, 130)\n        ctx.lineTo(80, 180)\n    },\n    (ctx) => {\n        // Right leg\n        ctx.moveTo(105, 130)\n        ctx.lineTo(125, 180)\n    },\n    (ctx) => {\n        // Left arm\n        ctx.moveTo(105, 85)\n        ctx.lineTo(85, 115)\n    },\n    (ctx) => {\n        // Right arm\n        ctx.moveTo(105, 85)\n        ctx.lineTo(125, 115)\n    }\n]\n\nclass HangmanCanvas extends Component {\n\n    constructor(props) {\n        super(props)\n        this.canvas = React.createRef()\n    }\n\n    componentDidMount() {\n        this.resetCanvas()\n    }\n\n    shouldComponentUpdate({ numberOfErrors }) {\n        if (numberOfErrors === 0) {\n            this.resetCanvas()\n        }\n        return this.props.numberOfErrors !== numberOfErrors\n    }\n\n    resetCanvas() {\n        const canvas = this.canvas.current\n        const ctx = canvas.getContext(\"2d\")\n\n        ctx.clearRect(0, 0, 150, 250)\n        ctx.strokeRect(0, 0, 150, 250)\n        this.drawHangmanSteps(0, this.props.maxErrorsAuthorized - 1, ctx)\n    }\n\n    drawHangmanSteps(startStepIndex, endStepIndex, ctx) {\n        console.log(`drawHangmanSteps ${startStepIndex} ${endStepIndex}`)\n        console.log(`How many steps : ${HANGMAN_STEPS.length}`)\n        ctx.beginPath()\n        HANGMAN_STEPS.slice(startStepIndex, endStepIndex).forEach(step => step(ctx))\n        ctx.closePath()\n        ctx.stroke()\n    }\n\n    componentDidUpdate({ maxErrorsAuthorized }) {\n        const canvas = this.canvas.current\n        const ctx = canvas.getContext(\"2d\")\n        const newNumberOfErrors = this.props.numberOfErrors\n        const startStepIndex = HANGMAN_STEPS.length - maxErrorsAuthorized\n        console.log(\"startStepIndex \" + startStepIndex)\n        const endStepIndex = startStepIndex + newNumberOfErrors\n        console.log(\"endStepIndex \" + endStepIndex)\n\n        if (endStepIndex === HANGMAN_STEPS.length) {\n            ctx.fillStyle = RED_COLOR\n            ctx.fillRect(1, 1, 149, 249)\n            ctx.beginPath()\n            ctx.moveTo(102, 50)\n            ctx.lineTo(98, 58)\n            ctx.moveTo(98, 50)\n            ctx.lineTo(102, 58)\n\n            ctx.moveTo(107, 50)\n            ctx.lineTo(112, 58)\n            ctx.moveTo(112, 50)\n            ctx.lineTo(107, 58)\n            ctx.closePath()\n            ctx.stroke()\n            //100, 50\n        }\n\n        this.drawHangmanSteps(0, endStepIndex, ctx)\n    }\n\n    render() {\n        return (\n            <div>\n                <canvas ref={this.canvas} height={250} width={150} />\n            </div>\n        )\n    }\n}\n\nHangmanCanvas.propTypes = {\n    numberOfErrors: PropTypes.number.isRequired,\n    maxErrorsAuthorized: PropTypes.number.isRequired,\n}\n\nHangmanCanvas.defaultProps = {\n    numberOfErrors: 0,\n}\n\nexport default HangmanCanvas"]},"metadata":{},"sourceType":"module"}